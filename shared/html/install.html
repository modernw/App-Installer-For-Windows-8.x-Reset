<!DOCTYPE html>
<html>

<head>
    <title>App Installer</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="text/javascript" src="js/module.js"></script>
    <script type="text/javascript" src="js/polyfill-ie.js"></script>
    <link rel="stylesheet" href="libs/winjs/2.0/css/ui-light.css">
    <script type="text/javascript" src="libs/winjs/2.0/js/base.js"></script>
    <script type="text/javascript" src="libs/winjs/2.0/js/ui.js"></script>
    <script type="text/javascript" src="js/color.js"></script>
    <script type="text/javascript" src="js/promise.js"></script>
    <script type="text/javascript" src="js/bridge.js"></script>
    <script type="text/javascript" src="js/dpimodes.js"></script>
    <script type="text/javascript" src="js/resources.js"></script>
    <script type="text/javascript" src="js/animation.js"></script>
    <link rel="stylesheet" href="fonts/fonts.css">
    <link rel="stylesheet" href="css/pages.css">
    <script type="text/javascript" src="js/event.js"></script>
    <script type="text/javascript" src="js/pages.js"></script>
    <script type="text/javascript" src="js/load.js"></script>
    <script type="text/javascript" src="js/init.js"></script>
</head>

<body>
    <div id="page-container" class="pagecontainer full">
        <div class="page splash">
            <!-- Splash Screen -->
            <img class="splash" src="images/splash.default.png" alt="Splash Screen" width="620" height="300">
            <div class="content splash">
                <progress class="win-ring"></progress>
            </div>
            <script>
                (function() {
                    "use strict";
                    var img = document.querySelector(".pagecontainer .page img.splash");
                    if (img) img.src = Bridge.UI.Splash.imageurl;
                    var progress = document.querySelector(".pagecontainer .page .content.splash progress");
                    if (Bridge.Frame.WindowSize.height / Bridge.UI.dpi < 500) {
                        if (progress.classList.contains("win-ring")) progress.classList.remove("win-ring");
                    } else progress.classList.add("win-ring");
                    var splashpage = document.querySelector(".pagecontainer .page.splash");
                    if (splashpage) {
                        splashpage.style.backgroundColor = Bridge.UI.Splash.backcolor;
                    }
                })();
            </script>
            <!-- Loading... -->
            <div class="content loading">
                <span class="ring-loading">&#57543;</span>&nbsp;
                <span data-res-byname="IDS_PLEASEWAIT">Please wait...</span>
            </div>
            <!-- Main Page -->
            <div class="content select preinstall installing installsuccess installfailed">
                <div style="width: 100%; box-sizing: border-box;" class="currentfile multiple">
                    <h1 class="win-type-x-large" data-res-byname="IDS_PREINSTALL_MTTITLE"></h1>
                    <label for="select-package" class="win-label" data-res-byname="IDS_PREINSTALL_MSELECT">在这里请选择一个包查看信息。</label><br />
                    <select id="select-package"></select><br />
                </div>
                <div class="storelogo">
                    <div class="filter">
                        <img src="images/splash.default.png" alt="App Store Logo">
                    </div>
                </div>
                <h1 class="win-type-x-large pkgtitle" data-res-byname="IDS_PREINSTALL_TITLE"></h1>
                <p class="pkgtitle multiple" data-res-byname="IDS_PREINSTALL_MPKGNAME"></p>
                <p data-res-byname="IDS_MSAPP"></p>
                <p class="pkgpublisher" data-res-byname="IDS_PUBLISHER"></p>
                <p class="pkgversion" data-res-byname="IDS_VERSION"></p><br />
                <p class="pkgfunctions-label" data-res-byname="IDS_FUNCTIONNAME"></p>
                <div class="functions">
                    <ul>
                        <li>使用全部的系统资源</li>
                    </ul>
                </div>
                <a class="moreinfo" data-res-byname="IDS_MOREINFO"></a>
                <script>
                    (function() {
                        "use strict";
                        var monitor = Windows.UI.Event.Monitor;
                        var page = document.querySelector(".page");
                        var content = page.querySelector(".content.preinstall");
                        var functions = page.querySelector(".functions");
                        var funculist = functions.querySelector("ul");

                        function sizeChangeEvent(e) {
                            var height = content.getBoundingClientRect().height;
                            var top = functions.getBoundingClientRect().top;
                            var newheight = parseInt((height - top - 10));
                            var listheight = (funculist.scrollHeight || funculist.offsetHeight || funculist.clientHeight || funculist.getBoundingClientRect().height || 10) + 20;
                            console.log(newheight, listheight);
                            if (newheight > listheight) newheight = listheight;
                            functions.style.height = newheight + "px";
                        }
                        var deb_sizechange = debounce(sizeChangeEvent, 500);
                        monitor.observe(content, Windows.UI.Event.Monitor.EventType.resize, deb_sizechange);
                        monitor.observe(content, Windows.UI.Event.Monitor.EventType.position, deb_sizechange);
                        monitor.observe(funculist, Windows.UI.Event.Monitor.EventType.child, deb_sizechange);
                        setTimeout(sizeChangeEvent, 0);
                    })();
                </script>
            </div>
            <div class="progress installing">
                <div>
                    <span class="ring-loading">&#57543;</span>&nbsp;<span class="status" data-res-byname="IDS_INSTALLING_SLOADING"></span>
                </div>
                <progress min="0" max="100" value="50" class="win-progress-bar"></progress>
            </div>
            <div class="reason installfailed">
                <p data-res-byname="IDS_FAILED_REASONNAME"></p>
                <textarea class="win-textarea" readonly></textarea>
            </div>
            <div class="controls select preinstall installing installsuccess installfailed">
                <div class="checkbox">
                    <input type="checkbox" id="preinst-enablelaunch" class="win-checkbox">
                    <label for="preinst-enablelaunch" data-res-byname="IDS_LAUNCHWHENREADY"></label>
                </div>
                <div class="command">
                    <button data-res-byname="IDS_PREINSTALL_TINSTALL"></button>
                    <button data-res-byname="IDS_PREINSTALL_CANCEL"></button>
                </div>
            </div>
            <div data-win-control="WinJS.UI.Flyout" id="moreinfo-flyout"></div>
        </div>
    </div>
</body>

</html>